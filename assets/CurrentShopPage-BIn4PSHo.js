import{n as e,G as m,z as b,m as S,j as t,A as I,D as z,B as w,r as g,E as F,q as M,s as P}from"./index-CK0kk-Fv.js";import{S as k,T as D}from"./Title.styled-BmSlnO5g.js";import{P as n}from"./index-DdQAP3K3.js";import{a as B,b as q}from"./index-B8KVHzIT.js";function A(o){return o.favorite.favorites}const R=e.ul`
    width: calc(100%+25px * 2);

    display: grid;
    grid-template-columns: 1fr;
    grid-auto-rows: auto;

    gap: 14px;

    padding-right: 25px;
    padding-left: 25px;
    margin-right: -25px;
    margin-left: -25px;

    @media screen and (min-width: 768px) {
        grid-template-columns: 1fr 1fr;
        overflow-y: auto;
    }
    @media screen and (min-width: 1440px) {
        grid-template-columns: 1fr 1fr 1fr;
        overflow-y: auto;
    }
`;function T(o){return m({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.36 7.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.836 1.973-1.836 1.09 0 2.063.637 2.063 2.688 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z"},child:[]},{tag:"path",attr:{d:"M12.438 8.668V14H11.39V9.684h-.051l-1.211.859v-.969l1.262-.906h1.046zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"},child:[]}]})(o)}function V(o){return m({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.438 1.668V7H11.39V2.684h-.051l-1.211.859v-.969l1.262-.906h1.046z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M11.36 14.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.835 1.973-1.835 1.09 0 2.063.636 2.063 2.687 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z"},child:[]},{tag:"path",attr:{d:"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"},child:[]}]})(o)}const Z=e.div`
    display: flex;
    column-gap: 8px;
    justify-content: center;
    align-items: center;

    position: absolute;
    top: 50%;
    right: 8px;
    transform: translate(0%, -50%);

    @media screen and (max-width: 400px) {
        right: -23px;
    }
`,E=e(T)`
    display: block;

    &:hover {
        cursor: pointer;
    }
`,U=e(V)`
    display: block;

    &:hover {
        cursor: pointer;
    }
`;function H(o){return m({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 4 7 C 3.449219 7 3 7.449219 3 8 C 3 8.550781 3.449219 9 4 9 L 6.21875 9 L 8.84375 19.5 C 9.066406 20.390625 9.863281 21 10.78125 21 L 23.25 21 C 24.152344 21 24.917969 20.402344 25.15625 19.53125 L 27.75 10 L 25.65625 10 L 23.25 19 L 10.78125 19 L 8.15625 8.5 C 7.933594 7.609375 7.136719 7 6.21875 7 Z M 22 21 C 20.355469 21 19 22.355469 19 24 C 19 25.644531 20.355469 27 22 27 C 23.644531 27 25 25.644531 25 24 C 25 22.355469 23.644531 21 22 21 Z M 13 21 C 11.355469 21 10 22.355469 10 24 C 10 25.644531 11.355469 27 13 27 C 14.644531 27 16 25.644531 16 24 C 16 22.355469 14.644531 21 13 21 Z M 16 7 L 16 10 L 13 10 L 13 12 L 16 12 L 16 15 L 18 15 L 18 12 L 21 12 L 21 10 L 18 10 L 18 7 Z M 13 23 C 13.5625 23 14 23.4375 14 24 C 14 24.5625 13.5625 25 13 25 C 12.4375 25 12 24.5625 12 24 C 12 23.4375 12.4375 23 13 23 Z M 22 23 C 22.5625 23 23 23.4375 23 24 C 23 24.5625 22.5625 25 22 25 C 21.4375 25 21 24.5625 21 24 C 21 23.4375 21.4375 23 22 23 Z"},child:[]}]})(o)}const N=e.article`
    width: 100%;

    display: flex;
    flex-direction: column;
    gap: 12px;

    padding: 16px;
    border-radius: 10px;
    border: 1px solid #caced1a0;

    background-color: #edf2f7;
    box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.03);

    @media screen and (max-width: 767.98px) {
        padding: 25px;
    }
`,G=e.div`
    position: relative;
    width: 100%;

    display: flex;
    align-items: center;
    justify-content: center;

    border-radius: 10px;
    background-color: white;
    border: 1px solid #e1e8ecdc;

    overflow: hidden;

    @media screen and (min-width: 1024px) {
        min-height: 240px;
        max-height: 250px;
    }
`,W=e.div`
    width: 100%;

    display: flex;
    flex-direction: column;
    gap: 12px;
`,$=e.div`
    display: flex;
    justify-content: space-between;
`,Q=e.span`
    font-size: 18px;
    font-weight: 500;
`,J=e.span`
    font-size: 16px;
    font-weight: 500;
`,K=e(H)`
    font-size: 22px;
`,O=e.button`
    width: 100%;

    display: flex;
    justify-content: center;
    column-gap: 6px;
    align-items: center;

    padding: 8px 16px;

    align-self: center;
    text-transform: uppercase;

    line-height: 1.2;
    font-size: 16px;
    font-weight: 500;

    background-color: #f7b31f;
    color: #fff;
    border: 1px solid #f7b31f;
    border-radius: 4px;

    cursor: pointer;
    transition: all 250ms;

    &:hover {
        background-color: #f59c02;
        border-color: #f59c02;
    }
`,X=e.div`
    display: flex;
    justify-content: center;
    align-items: center;

    position: absolute;
    top: 3px;
    right: 3px;

    position: absolute;

    &:hover {
        cursor: pointer;
    }
`,Y=e(B)`
    font-size: 24px;
    color: #ff005d;
`,_=e(q)`
    font-size: 24px;
    color: rgba(0, 0, 0, 0.5);

    &:hover {
        color: #ff005d;
    }
`,tt=e.img`
    @media screen and (min-width: 1440px) {
        max-width: 240px;
    }
`;function y({product:o}){const{id:c,name:i,imageUrl:d,price:l,isInFavorites:p}=o,{state:{storeId:u,store:x}}=b(),a=S();return t.jsxs(N,{children:[t.jsxs(G,{children:[t.jsx(tt,{src:d,alt:i,loading:"lazy"}),t.jsx(X,{onClick:()=>a(I({id:c,name:i})),children:p?t.jsx(Y,{}):t.jsx(_,{style:{opacity:1}})})]}),t.jsxs(W,{children:[t.jsxs($,{children:[t.jsx(Q,{children:i}),t.jsxs(J,{children:[l," â‚´"]})]}),t.jsxs(O,{onClick:()=>{a(z({id:c,name:i,price:l,quantity:1,imageUrl:d,storeId:u,store:x})),w.success(`"${i}" added to cart.`)},children:["Add to cart ",t.jsx(K,{})]})]})]})}y.propTypes={product:n.shape({id:n.string.isRequired,name:n.string.isRequired,imageUrl:n.string.isRequired,price:n.number.isRequired,storeId:n.string,store:n.string,quantity:n.number,isInFavorites:n.bool}).isRequired};function st(){const[o,c]=g.useState(!1),[i,d]=g.useState(!1),{shopId:l}=F(),p=M(A),{data:u,isSuccess:x,isError:a,error:f}=P.useGetShopPriceQuery(l),{state:{store:j}}=b();g.useEffect(()=>{a&&w.success(`(${f.status}) ${f.data}`)},[a,f]);const v=()=>p.length?u.map(r=>({...r,isInFavorites:p.some(s=>s.id===r.id)})):u.map(r=>({...r,isInFavorites:!1})),L=()=>{const r=(s,h)=>h.isInFavorites-s.isInFavorites!==0?h.isInFavorites-s.isInFavorites:i?s.price-h.price:h.price-s.price;return i||o?[...v()].sort(r):v()},C=r=>{const s=r.target.dataset.action;d(s==="sortUp"&&!i),c(s==="sortDown"&&!o)};return t.jsxs(t.Fragment,{children:[x&&t.jsxs(k,{children:[t.jsxs(D,{style:{position:"relative"},children:[j," assortment:",t.jsxs(Z,{children:[t.jsx(U,{size:22,type:"button",color:i?"#db1b4e":"rgba(0, 0, 0, 0.7)","data-action":"sortUp",onClick:r=>C(r)}),t.jsx(E,{size:22,type:"button",color:o?"#db1b4e":"rgba(0, 0, 0, 0.7)","data-action":"sortDown",onClick:r=>C(r)})]})]}),t.jsx(R,{children:L().map(r=>t.jsx(y,{product:r},r.id))})]}),!x&&null]})}export{st as default};
