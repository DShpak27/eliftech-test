import{n as r,G as b,u as M,j as t,z as P,A as D,B as C,r as v,D as k,a as B,s as j}from"./index-DBEzMvd7.js";import{S as A,T as R}from"./Title.styled-D0bonsAN.js";import{P as s}from"./index-CR_uzvGQ.js";import{a as q,b as E}from"./index-DS2zzgUq.js";function T(o){return o.favorite.favorites}const V=r.ul`
    width: calc(100%+25px * 2);

    display: grid;
    grid-template-columns: 1fr;
    grid-auto-rows: auto;

    gap: 14px;

    padding-right: 25px;
    padding-left: 25px;
    margin-right: -25px;
    margin-left: -25px;

    @media screen and (min-width: 768px) {
        grid-template-columns: 1fr 1fr;
        overflow-y: auto;
    }
    @media screen and (min-width: 1440px) {
        grid-template-columns: 1fr 1fr 1fr;
        overflow-y: auto;
    }
`;function N(o){return b({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.36 7.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.836 1.973-1.836 1.09 0 2.063.637 2.063 2.688 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z"},child:[]},{tag:"path",attr:{d:"M12.438 8.668V14H11.39V9.684h-.051l-1.211.859v-.969l1.262-.906h1.046zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"},child:[]}]})(o)}function Z(o){return b({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.438 1.668V7H11.39V2.684h-.051l-1.211.859v-.969l1.262-.906h1.046z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M11.36 14.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.835 1.973-1.835 1.09 0 2.063.636 2.063 2.687 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98z"},child:[]},{tag:"path",attr:{d:"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"},child:[]}]})(o)}const U=r.div`
    display: flex;
    column-gap: 8px;
    justify-content: center;
    align-items: center;

    position: absolute;
    top: 50%;
    right: 8px;
    transform: translate(0%, -50%);

    @media screen and (max-width: 400px) {
        right: -23px;
    }
`,$=r(N)`
    display: block;

    &:hover {
        cursor: pointer;
    }
`,G=r(Z)`
    display: block;

    &:hover {
        cursor: pointer;
    }
`;function H(o){return b({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 4 7 C 3.449219 7 3 7.449219 3 8 C 3 8.550781 3.449219 9 4 9 L 6.21875 9 L 8.84375 19.5 C 9.066406 20.390625 9.863281 21 10.78125 21 L 23.25 21 C 24.152344 21 24.917969 20.402344 25.15625 19.53125 L 27.75 10 L 25.65625 10 L 23.25 19 L 10.78125 19 L 8.15625 8.5 C 7.933594 7.609375 7.136719 7 6.21875 7 Z M 22 21 C 20.355469 21 19 22.355469 19 24 C 19 25.644531 20.355469 27 22 27 C 23.644531 27 25 25.644531 25 24 C 25 22.355469 23.644531 21 22 21 Z M 13 21 C 11.355469 21 10 22.355469 10 24 C 10 25.644531 11.355469 27 13 27 C 14.644531 27 16 25.644531 16 24 C 16 22.355469 14.644531 21 13 21 Z M 16 7 L 16 10 L 13 10 L 13 12 L 16 12 L 16 15 L 18 15 L 18 12 L 21 12 L 21 10 L 18 10 L 18 7 Z M 13 23 C 13.5625 23 14 23.4375 14 24 C 14 24.5625 13.5625 25 13 25 C 12.4375 25 12 24.5625 12 24 C 12 23.4375 12.4375 23 13 23 Z M 22 23 C 22.5625 23 23 23.4375 23 24 C 23 24.5625 22.5625 25 22 25 C 21.4375 25 21 24.5625 21 24 C 21 23.4375 21.4375 23 22 23 Z"},child:[]}]})(o)}const W=r.article`
    width: 100%;

    display: flex;
    flex-direction: column;
    gap: 12px;

    padding: 16px;
    border-radius: 10px;
    border: 1px solid #caced1a0;

    background-color: #edf2f7;
    box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.03);

    @media screen and (max-width: 767.98px) {
        padding: 25px;
    }
`,Q=r.div`
    position: relative;
    width: 100%;

    display: flex;
    align-items: center;
    justify-content: center;

    border-radius: 10px;
    background-color: white;
    border: 1px solid #e1e8ecdc;

    overflow: hidden;

    @media screen and (min-width: 1024px) {
        min-height: 240px;
        max-height: 250px;
    }
`,J=r.div`
    width: 100%;

    display: flex;
    flex-direction: column;
    gap: 12px;
`,K=r.div`
    display: flex;
    justify-content: space-between;
`,O=r.span`
    font-size: 18px;
    font-weight: 500;
`,X=r.span`
    font-size: 16px;
    font-weight: 500;
`,Y=r(H)`
    font-size: 22px;
`,_=r.button`
    width: 100%;

    display: flex;
    justify-content: center;
    column-gap: 6px;
    align-items: center;

    padding: 8px 16px;

    align-self: center;
    text-transform: uppercase;

    line-height: 1.2;
    font-size: 16px;
    font-weight: 500;

    background-color: #f7b31f;
    color: #fff;
    border: 1px solid #f7b31f;
    border-radius: 4px;

    cursor: pointer;
    transition: all 250ms;

    &:hover {
        background-color: #f59c02;
        border-color: #f59c02;
    }
`,tt=r.div`
    display: flex;
    justify-content: center;
    align-items: center;

    position: absolute;
    top: 3px;
    right: 3px;

    position: absolute;

    &:hover {
        cursor: pointer;
    }
`,et=r(q)`
    font-size: 24px;
    color: #ff005d;
`,rt=r(E)`
    font-size: 24px;
    color: rgba(0, 0, 0, 0.5);

    &:hover {
        color: #ff005d;
    }
`,ot=r.img`
    @media screen and (min-width: 1440px) {
        max-width: 240px;
    }
`;function I({product:o,storeName:x,storeId:a}){const{id:p,name:n,imageUrl:c,price:d,isInFavorites:u}=o,l=M();return t.jsxs(W,{children:[t.jsxs(Q,{children:[t.jsx(ot,{src:c,alt:n,loading:"lazy"}),t.jsx(tt,{onClick:()=>l(P({id:p,name:n})),children:u?t.jsx(et,{}):t.jsx(rt,{style:{opacity:1}})})]}),t.jsxs(J,{children:[t.jsxs(K,{children:[t.jsx(O,{children:n}),t.jsxs(X,{children:[d," â‚´"]})]}),t.jsxs(_,{onClick:()=>{l(D({id:p,name:n,price:d,quantity:1,imageUrl:c,storeId:a,store:x})),C.success(`"${n}" added to cart.`)},children:["Add to cart ",t.jsx(Y,{})]})]})]})}I.propTypes={storeName:s.string,storeId:s.string,product:s.shape({id:s.string.isRequired,name:s.string.isRequired,imageUrl:s.string.isRequired,price:s.number.isRequired,storeId:s.string,store:s.string,quantity:s.number,isInFavorites:s.bool}).isRequired};function ct(){const[o,x]=v.useState(!1),[a,p]=v.useState(!1),{shopId:n}=k(),c=B(T),{data:d,isSuccess:u,isError:l,error:f}=j.useGetShopPriceQuery(n),{data:L,isSuccess:F,isError:w,error:g}=j.useGetShopsQuery();v.useEffect(()=>{l&&C.success(`(${f.status}) ${f.data}`),w&&C.success(`(${g.status}) ${g.data}`)},[l,f,w,g]);const y=()=>c.length?d.map(e=>({...e,isInFavorites:c.some(i=>i.id===e.id)})):d.map(e=>({...e,isInFavorites:!1})),z=()=>{const e=(i,h)=>h.isInFavorites-i.isInFavorites!==0?h.isInFavorites-i.isInFavorites:a?i.price-h.price:h.price-i.price;return a||o?[...y()].sort(e):y()},S=e=>{const i=e.target.dataset.action;p(i==="sortUp"&&!a),x(i==="sortDown"&&!o)},m=L.find(e=>e.id===n);return t.jsxs(t.Fragment,{children:[u&&F&&t.jsxs(A,{children:[t.jsxs(R,{style:{position:"relative"},children:[m.name," assortment:",t.jsxs(U,{children:[t.jsx(G,{size:22,type:"button",color:a?"#db1b4e":"rgba(0, 0, 0, 0.7)","data-action":"sortUp",onClick:e=>S(e)}),t.jsx($,{size:22,type:"button",color:o?"#db1b4e":"rgba(0, 0, 0, 0.7)","data-action":"sortDown",onClick:e=>S(e)})]})]}),t.jsx(V,{children:z().map(e=>t.jsx(I,{product:e,storeName:m.name,storeId:m.id},e.id))})]}),!u&&null]})}export{ct as default};
